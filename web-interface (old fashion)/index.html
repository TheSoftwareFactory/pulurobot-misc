<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="">
   <![endif]-->
   <!--[if IE 7]>
   <html class="no-js lt-ie9 lt-ie8" lang="">
      <![endif]-->
      <!--[if IE 8]>
      <html class="no-js lt-ie9" lang="">
         <![endif]-->
         <!--[if gt IE 8]><!-->
         <html class="no-js" lang="">
            <!--<![endif]-->
            <html lang="en">
               <head>
                  <meta charset="utf-8">
                  <meta name="description" content="Pulurobotics Webclient Alpha">
                  <meta name="viewport" content="width=device-width, initial-scale=1">
                  <script src="js/lws-common.js"></script>
                  <script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
                  <title>Pulurobot Webclient Prototype</title>
                  <link rel="icon" href="favicon.png" />
                  <!--  Important JS -->
                  <script src="assets/js/html-css-sanitizer.js"></script>
                  <!--  Stylesheets -->
                  <link rel="stylesheet" href="assets/css/normalize.css">
                  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
                  <link rel="stylesheet" href="assets/css/font-awesome.min.css">
                  <link rel="stylesheet" href="assets/css/themify-icons.css">
                  <link rel="stylesheet" href="assets/css/flag-icon.min.css">
                  <link rel="stylesheet" href="assets/css/cs-skin-elastic.css">
                  <link rel="stylesheet" href="assets/scss/style.css">
                  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
                  <link rel="stylesheet" href="/css/arrow-pad.css"/>
                  <link rel="stylesheet" href="/css/overlay.css"/>
               </head>
               <body>
                  <aside id="left-panel" class="left-panel" style="position: static">
                     <nav class="navbar navbar-expand-sm navbar-default">
                        <div class="navbar-header">
                           <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
                           <i class="fa fa-bars"></i>
                           </button>
                           <a class="navbar-brand" href="./"><img src="images/pulurobotics1.jpeg" alt="Logo"></a>
                           <a class="navbar-brand hidden" href="./"><img src="images/pulurobotics.png" alt="Logo"></a>
                        </div>
                        <div id="main-menu" class="main-menu collapse navbar-collapse">
                           <ul class="nav navbar-nav">
                              <li class="active">
                                 <a href="index.html"> <i class="menu-icon fa fa-dashboard"></i>Dashboard </a>
                              </li>
                              <h3 class="menu-title">Commands</h3>
                              <!-- /.menu-title -->
                              <li class="">
                                 <a href="#map-section"> <i class="menu-icon fa fa-map"></i>Components</a>
                              </li>
                              <li class="">
                                 <a href="#modes-section"> <i class="menu-icon fa fa-tasks"></i>Modes</a>
                              </li>
                              <li class=" dropdown">
                                 <a href="#controller-section"> <i class="menu-icon fa fa-gamepad"></i>Manual commands</a>
                              </li>
                              <li class=" dropdown">
                                 <a href="#soft-section" class="dropdown-toggle"> <i class="menu-icon fa fa-cogs"></i>Software, flash & reboot</a>
                              </li>
                           </ul>
                        </div>
                        <!-- /.navbar-collapse -->
                     </nav>
                  </aside>
                  <!-- /#left-panel -->

                  <!--  Right panel -->
                  <div id="right-panel" class="right-panel">
                     <!-- Header-->
                     <header id="header" class="header">
                        <div class="header-menu">
                           <div class="col-sm-7">
                              <a id="menuToggle" class="menutoggle pull-left"><i class="fa fa fa-tasks"></i></a>
                              <div class="header-left">
                                 <div class="dropdown for-notification">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" id="notification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-bell"></i>
                                    <span class="count bg-danger">0</span>
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="notification">
                                       <p class="red">No notification</p>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-sm-5">
                              <div class="language-select dropdown" id="language-select">
                                 <a class="dropdown-toggle" href="#" data-toggle="dropdown"  id="language" aria-haspopup="true" aria-expanded="true">
                                 <i class="flag-icon flag-icon-us"></i>
                                 </a>
                                 <div class="dropdown-menu" aria-labelledby="language" >
                                    <!-- <div class="dropdown-item">
                                       <span class="flag-icon flag-icon-fr"></span>
                                       </div> -->
                                    <!-- <div class="dropdown-item">
                                       <i class="flag-icon flag-icon-es"></i>
                                       </div> -->
                                    <div class="dropdown-item">
                                       <i class="flag-icon flag-icon-us"></i>
                                    </div>
                                    <!-- <div class="dropdown-item">
                                       <i class="flag-icon flag-icon-it"></i>
                                       </div> -->
                                 </div>
                              </div>
                           </div>
                        </div>
                     </header>
                     <!-- /header -->
                     <article class="content mt-3">
                        <div class="row" id="map-section">
                           <div class="col-sm-12 col-md-10 pr-0">
                             <div id="map"></div>
                           </div>
                           <div class="col-sm-12 col-md-2">
                              <div id="wsdi_card_status" class="card text-white bg-flat-color-2 mb-1" style="transition: .2s all">
                                 <div class="card-body p-2 pb-0">
                                    <h4 class="mb-0">
                                       <span>Connection State</span>
                                    </h4>
                                    <p class="text-light text-center" id="wsdi_status">
                                      Initializing ...<br/>
                                      <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                                    </p>
                                 </div>
                              </div>
                              <input class="btn btn-info btn-block btn-sm" type=button id=route value="Route there" style="display:none">
                              <input class="btn btn-info btn-block btn-sm" type=button id=direct_fwd value="Direct forward" style="display:none">
                              <input class="btn btn-info btn-block btn-sm" type=button id=direct_back value="Direct reverse" style="display:none">
                              <input class="btn btn-info btn-block btn-sm" type=button id=rotate value="Rotate towards" style="display:none">
                              <hr/>
                              <input class="btn btn-info btn-block btn-sm" type=button id=charger value="Go to charger">
                              <input class="btn btn-info btn-block btn-sm" type=button id=update_view value="Update view">
                              <button class="btn btn-danger btn-block btn-sm" id=estop>
                                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                                STOP
                                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                              </button>
                           </div>
                        </div>
                        <div class="col-sm-12">
                           <div class="card row">
                              <div class="card-body">
                                 <h4>Infos</h4>
                                 <p>
                                   <i class="fa fa-battery" aria-hidden="true"></i>
                                   <span>Battery status: </span>
                                   <strong id=bat_status>n/a V - n/a V<i class='small'>in</i> - n/a %</strong>
                                   <br/>
                                   <i class="fa fa-exchange" aria-hidden="true"></i>
                                   <span>Status: </span>
                                   <strong id=status>n/a</strong><br/>
                                   <!-- <span>Dbg: </span><strong id=dbg>...</strong><br/> -->
                                   <i class="fa fa-link" aria-hidden="true"></i>
                                   <span>Websocket Url: </span>
                                   <strong id=ws_url>...</strong>
                                 </p>
                              </div>
                           </div>
                           <!--  ROBOT MODES -->
                           <div class="card row" id="modes-section">
                              <div class="card-body">
                                 <div class="row">
                                    <div class="col-sm-4">
                                       <h4 class="card-title mb-0">Robot modes</h4>
                                       <div class="small text-muted">Clicking one toggle off the others</div>
                                    </div>
                                 </div>
                                 <div class="row mt-4">
                                    <div class="col-sm-6 col-md-6">
                                       <input class="btn btn-info btn-block" type=button id=mode1 value="User control, with localization/mapping">
                                       <p>Normal operation mode. Stops autonomous decisions.</p>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                       <input class="btn btn-info btn-block" type=button id=mode2 value="Autonomous mapping, skip compass">
                                       <p>Make the robot decide where to go.</p>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                       <input class="btn btn-info btn-block" type=button id=mode5 value="Motors disabled, with localization/mapping">
                                       <p>Lets you move the robot freely.</p>
                                    </div>
                                    <div class="col-sm-6 col-md-6">
                                       <input class="btn btn-info btn-block" type=button id=mode6 value="Motors disabled, NO localization/mapping">
                                       <p>Does not mess up the map if the robot is wrongly localized.</p>
                                    </div>
                                 </div>
                                 <hr/>
                                 <h6>Secondary modes</h6>
                                 <div class="row mt-4">
                                    <div class="col-sm-6 col-md-4">
                                       <input class="btn btn-info btn-sm btn-block" type=button id=mode0 value="User control, NO localization/mapping">
                                       <p>Take the total control of what happens.</p>
                                    </div>
                                    <div class="col-sm-6 col-md-4">
                                       <input class="btn btn-info btn-sm btn-block" type=button id=mode3 value="Autonom. mapping, start from compass">
                                       <p> Use this to localize the robot on the map. Let it run for a while, until localized..</p>
                                    </div>
                                    <div class="col-sm-6 col-md-4">
                                       <input class="btn btn-info btn-sm btn-block" type=button id=mode4 value="DaijuMode">
                                       <p>Daiju</p>
                                    </div>
                                 </div>
                                 <hr/>
                                 <h6>Charger</h6>
                                 <div class="row mt-4">
                                    <div class="col-sm-6">
                                       <input class="btn btn-outline-secondary btn-block btn-lg" type=button id=mode7 value="Program charger location">
                                    </div>
                                    <div class="col-sm-6">
                                       <p>
                                          Click this after you have put the robot IN the charger, do this once, or everytime the charger is moved.
                                       </p>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!--  MANUAL CONTROLS -->
                           <div class="row" id="controller-section">
                              <div class="col-sm-9 pl-0">
                                 <div class="card">
                                    <div class="card-body">
                                       <div class="col-sm-7">
                                          <h2>Manual controls</h2>
                                          <p>
                                             For resolving problems.<br/>
                                             <strong>Forward/Backward : </strong> 10 cm per click<br/>
                                             <strong>Left/Right</strong> 10° per click
                                          </p>
                                       </div>
                                       <div class="col-sm-5">
                                          <div class="arrow-pad">
                                             <div class="inner-pad shadow"></div>
                                             <div class="inner-pad">
                                                <div class="arrow arrow-left" 	id=manu_left></div>
                                                <div class="arrow arrow-right" id=manu_right></div>
                                                <div class="arrow arrow-up" 		id=manu_fwd></div>
                                                <div class="arrow arrow-down" 	id=manu_back></div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div class="col-sm-3 pr-0 mt-5">
                                 <input class="btn btn-secondary btn-block btn-sm" type=button id=del_maps value="Force map refresh">
                                 <p>Refetches all maps from the robot.</p>
                                 <p class="text-center"><i class="fa fa-map p-3" aria-hidden="true"></i><i class="fa fa-refresh p-3" aria-hidden="true"></i></p>
                              </div>
                           </div>
                           <!--  ROBOT SOFTWARE MANIPULATION -->
                           <div class="card row" id="soft-section">
                              <div class="card-body">
                                 <div class="row">
                                    <div class="col-lg-4">
                                       <h4 class="mb-3">Software manipulations</h4>
                                       <input class="btn btn-warning btn-sm btn-block" type=button id=restart value="Restart rn1host">
                                       <p>Restarts the robot raspi software</p>
                                       <input class="btn btn-warning btn-sm btn-block" type=button id=update value="Update rn1host from github">
                                       <p>Quits, does a git pull, compiles, and restarts the robot raspi software.</p>
                                       <input class="btn btn-danger btn-sm btn-block" type=button id=quit value="Quit rn1host">
                                       <p>Quits the robot raspi software. You need to manually restart it via ssh, or reboot the robot to get it run again.</p>
                                    </div>
                                    <div class="col-lg-4">
                                       <h4 class="mb-3">Flash</h4>
                                       <input class="btn btn-warning btn-sm btn-block" type=button id=reflash value="Update firmware(s)">
                                       <p>
                                       <ul>
                                       <li>Place the firmware file(s) on the robot raspi filesystem, in
                                          <i>/home/hrst/rn1&#8209;tools/main.bin</i> or <i>motcon.bin</i>, then run this.
                                       </li>
                                       <li>Reflashes &amp; restarts.</li>
                                       <li>Creates a log file at <i>rn1&#8209;tools/program_log.txt</i></li>
                                       </p>
                                    </div>
                                    <div class="col-lg-4">
                                       <h4 class="mb-3">Boot &amp; reboot</h4>
                                       <input class="btn btn-warning btn-sm btn-block" type=button id=raspi_reboot value="Reboot the robot computer">
                                       <p>Runs <i>shutdown -r now</i> on the robot Raspi</p>
                                       <input class="btn btn-danger btn-sm btn-block" type=button id=raspi_shdn value="Shutdown the robot computer">
                                       <p>Runs <i>shutdown -h now</i> on the robot Raspi - do this before switching off the power to avoid filesystem corruption.</p>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </article>
                     <!--  Footer -->
                     <footer class="text-center">
                        <p>Pulurobotics 2017-2018 - Helsinki University</p>
                     </footer>
                  </div>
                  <script src="js/util.js"></script>
                  <script src="js/robotmap.js"></script>
                  <script src="js/controller.js"></script>
                  <script src="js/main-es6.js"></script>

                  <script src="assets/js/vendor/jquery-2.1.4.min.js"></script>
                  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
                  <script src="assets/js/plugins.js"></script>
                  <script src="assets/js/main.js"></script>
                  <script>
                     document.getElementById('charger').onclick = charger;
                     document.getElementById('mode0').onclick = mode0;
                     document.getElementById('mode1').onclick = mode1;
                     document.getElementById('mode2').onclick = mode2;
                     document.getElementById('mode3').onclick = mode3;
                     document.getElementById('mode4').onclick = mode4;
                     document.getElementById('mode5').onclick = mode5;
                     document.getElementById('mode6').onclick = mode6;
                     document.getElementById('mode7').onclick = mode7;
                     document.getElementById('estop').onclick = mode5;

                     document.getElementById('manu_fwd').onclick = manu_fwd;
                     document.getElementById('manu_back').onclick = manu_back;
                     document.getElementById('manu_left').onclick = manu_left;
                     document.getElementById('manu_right').onclick = manu_right;

                     document.getElementById('update_view').onclick = update_view

                     document.getElementById('route').onclick = do_route;
                     document.getElementById('direct_fwd').onclick = do_direct_fwd;
                     document.getElementById('direct_back').onclick = do_direct_back;
                     document.getElementById('rotate').onclick = do_rotate;

                     document.getElementById('restart').onclick = rn1host_restart;
                     document.getElementById('update').onclick = rn1host_update;
                     document.getElementById('quit').onclick = rn1host_quit;
                     document.getElementById('reflash').onclick = rn1host_reflash;
                     document.getElementById('raspi_reboot').onclick = rn1host_reboot_raspi;
                     document.getElementById('raspi_shdn').onclick = rn1host_shdn_raspi;

                     document.getElementById('del_maps').onclick = do_del_maps;
                  </script>
                  <!-- Scripts related to visual effects -->
                  <!-- <script src="assets/js/lib/chart-js/Chart.bundle.js"></script> -->
                  <!-- <script src="assets/js/dashboard.js"></script> -->
                  <!-- <script src="assets/js/widgets.js"></script> -->
               </body>
            </html>
